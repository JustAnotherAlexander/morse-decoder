const MORSE_TABLE = {
    '.-':     'a',
    '-...':   'b',
    '-.-.':   'c',
    '-..':    'd',
    '.':      'e',
    '..-.':   'f',
    '--.':    'g',
    '....':   'h',
    '..':     'i',
    '.---':   'j',
    '-.-':    'k',
    '.-..':   'l',
    '--':     'm',
    '-.':     'n',
    '---':    'o',
    '.--.':   'p',
    '--.-':   'q',
    '.-.':    'r',
    '...':    's',
    '-':      't',
    '..-':    'u',
    '...-':   'v',
    '.--':    'w',
    '-..-':   'x',
    '-.--':   'y',
    '--..':   'z',
    '.----':  '1',
    '..---':  '2',
    '...--':  '3',
    '....-':  '4',
    '.....':  '5',
    '-....':  '6',
    '--...':  '7',
    '---..':  '8',
    '----.':  '9',
    '-----':  '0',
};

function decode(expr) {

    let Morse_Codes = [
        [['.-'],     ['a']],
        [['-...'],   ['b']],
        [['-.-.'],   ['c']],
        [['-..'],    ['d']],
        [['.'],      ['e']],
        [['..-.'],   ['f']],
        [['--.'],    ['g']],
        [['....'],   ['h']],
        [['..'],     ['i']],
        [['.---'],   ['j']],
        [['-.-'],    ['k']],
        [['.-..'],   ['l']],
        [['--'],     ['m']],
        [['-.'],     ['n']],
        [['---'],    ['o']],
        [['.--.'],   ['p']],
        [['--.-'],   ['q']],
        [['.-.'],    ['r']],
        [['...'],    ['s']],
        [['-'],      ['t']],
        [['..-'],    ['u']],
        [['...-'],   ['v']],
        [['.--'],    ['w']],
        [['-..-'],   ['x']],
        [['-.--'],   ['y']],
        [['--..'],   ['z']],
        [['.----'],  ['1']],
        [['..---'],  ['2']],
        [['...--'],  ['3']],
        [['....-'],  ['4']],
        [['.....'],  ['5']],
        [['-....'],  ['6']],
        [['--...'],  ['7']],
        [['---..'],  ['8']],
        [['----.'],  ['9']],
        [['-----'],  ['0']],
    ]

    expr=expr.split('');
    let result =[];

    while (expr.length>0) {
    result.push(expr.splice(0,10));
    }

    for (let i=0; i<result.length; i++) {

        for (let j=0; j<result[i].length;) {

            if (result[i][j]=='.' || result[i][j]=='-' || result[i][j]=='*') {
                j++;
                continue;
            }
            if ((result[i][j]==1 && result[i][j+1]==1)){
                result[i].splice(j,2,'-');

                j=0;
            } else if (result[i][j]==1 && result[i][j+1]==0) {
                result[i].splice(j,2,'.');
 
                j=0;
            } else if (result[i][j]==0 && result[i][j+1]==0) {
                result[i].splice(j,2);
 
                j=0;
            }
        }

    }
    for (let i=0; i<result.length; i++) {
        result[i]=result[i].join('');
        for (let j=0; j<Morse_Codes.length; j++) {

            if (result[i]==Morse_Codes[j][0]) {
                result[i]=Morse_Codes[j][1];
            }
        }
        if (result[i]=='**********') {
            result[i]=' ';
        }
    }

return result.join('');
}


module.exports = {
    decode
}